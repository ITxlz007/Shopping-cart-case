<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>我的购物车-品优购</title>
    <meta name="description" content="品优购JD.COM-专业的综合网上购物商城,销售家电、数码通讯、电脑、家居百货、服装服饰、母婴、图书、食品等数万个品牌优质商品.便捷、诚信的服务，为您提供愉悦的网上购物体验!" />
    <meta name="Keywords" content="网上购物,网上商城,手机,笔记本,电脑,MP3,CD,VCD,DV,相机,数码,配件,手表,存储卡,品优购" />
    <!-- 引入facicon.ico网页图标 -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <!-- 引入css 初始化的css 文件 -->
    <link rel="stylesheet" href="css/base.css">
    <!-- 引入公共样式的css 文件 -->
    <link rel="stylesheet" href="css/common.css">
    <!-- 引入car css -->
    <link rel="stylesheet" href="css/car.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
</head>

<body>
    <!-- 顶部快捷导航start -->
    <div class="shortcut">
        <div class="w">
            <div class="fl">
                <ul>
                    <li>品优购欢迎您！ </li>
                    <li>
                        <a href="#">请登录</a>
                        <a href="#" class="style-red">免费注册</a>
                    </li>
                </ul>
            </div>
            <div class="fr">
                <ul>
                    <li><a href="#">我的订单</a></li>
                    <li class="spacer"></li>
                    <li>
                        <a href="#">我的品优购</a>
                        <i class="icomoon"></i>
                    </li>
                    <li class="spacer"></li>
                    <li><a href="#">品优购会员</a></li>
                    <li class="spacer"></li>
                    <li><a href="#">企业采购</a></li>
                    <li class="spacer"></li>
                    <li><a href="#">关注品优购</a> <i class="icomoon"></i></li>
                    <li class="spacer"></li>
                    <li><a href="#">客户服务</a> <i class="icomoon"></i></li>
                    <li class="spacer"></li>
                    <li><a href="#">网站导航</a> <i class="icomoon"></i></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- 顶部快捷导航end  -->


    <div class="car-header">
        <div class="w">
            <div class="car-logo">
                <img src="img/logo.png" alt=""> <b>购物车</b>
            </div>
        </div>
    </div>

    </div>
    <div class="c-container">
        <div class="w">
            <div class="cart-filter-bar">
                <em>全部商品</em>
            </div>
            <!-- 购物车主要核心区域 -->
            <div class="cart-warp">
                <!-- 头部全选模块 -->
                <div class="cart-thead">
                    <div class="t-checkbox">
                        <input type="checkbox" name="" id="" class="checkall"> 全选
                    </div>
                    <div class="t-goods">商品</div>
                    <div class="t-price">单价</div>
                    <div class="t-num">数量</div>
                    <div class="t-sum">小计</div>
                    <div class="t-action">操作</div>
                </div>
                <!-- 商品详细模块 -->
                <div class="cart-item-list">
                    <div class="cart-item check-cart-item">
                        <div class="p-checkbox">
                            <input type="checkbox" name="" id="" checked class="j-checkbox">
                        </div>
                        <div class="p-goods">
                            <div class="p-img">
                                <img src="upload/p1.jpg" alt="">
                            </div>
                            <div class="p-msg">【5本26.8元】经典儿童文学彩图青少版八十天环游地球中学生语文教学大纲</div>
                        </div>
                        <div class="p-price">￥12.60</div>
                        <div class="p-num">
                            <div class="quantity-form">
                                <a href="javascript:;" class="decrement">-</a>
                                <input type="text" class="itxt" value="1">
                                <a href="javascript:;" class="increment">+</a>
                            </div>
                        </div>
                        <div class="p-sum">￥12.60</div>
                        <div class="p-action"><a href="javascript:;">删除</a></div>
                    </div>
                    <div class="cart-item">
                        <div class="p-checkbox">
                            <input type="checkbox" name="" id="" class="j-checkbox">
                        </div>
                        <div class="p-goods">
                            <div class="p-img">
                                <img src="upload/p2.jpg" alt="">
                            </div>
                            <div class="p-msg">【2000张贴纸】贴纸书 3-6岁 贴画儿童 贴画书全套12册 贴画 贴纸儿童 汽</div>
                        </div>
                        <div class="p-price">￥24.80</div>
                        <div class="p-num">
                            <div class="quantity-form">
                                <a href="javascript:;" class="decrement">-</a>
                                <input type="text" class="itxt" value="1">
                                <a href="javascript:;" class="increment">+</a>
                            </div>
                        </div>
                        <div class="p-sum">￥24.80</div>
                        <div class="p-action"><a href="javascript:;">删除</a></div>
                    </div>
                    <div class="cart-item">
                        <div class="p-checkbox">
                            <input type="checkbox" name="" id="" class="j-checkbox">
                        </div>
                        <div class="p-goods">
                            <div class="p-img">
                                <img src="upload/p3.jpg" alt="">
                            </div>
                            <div class="p-msg">唐诗三百首+成语故事全2册 一年级课外书 精装注音儿童版 小学生二三年级课外阅读书籍</div>
                        </div>
                        <div class="p-price">￥29.80</div>
                        <div class="p-num">
                            <div class="quantity-form">
                                <a href="javascript:;" class="decrement">-</a>
                                <input type="text" class="itxt" value="1">
                                <a href="javascript:;" class="increment">+</a>
                            </div>
                        </div>
                        <div class="p-sum">￥29.80</div>
                        <div class="p-action"><a href="javascript:;">删除</a></div>
                    </div>
                </div>

                <!-- 结算模块 -->
                <div class="cart-floatbar">
                    <div class="select-all">
                        <input type="checkbox" name="" id="" class="checkall">全选
                    </div>
                    <div class="operation">
                        <a href="javascript:;" class="remove-batch"> 删除选中的商品</a>
                        <a href="javascript:;" class="clear-all">清理购物车</a>
                    </div>
                    <div class="toolbar-right">
                        <div class="amount-sum">已经选<em>1</em>件商品</div>
                        <div class="price-sum">总价： <em>￥12.60</em></div>
                        <div class="btn-area">去结算</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- footer start -->
    <div class="footer">
        <div class="w">
            <!-- mod_service -->
            <div class="mod_service">
                <ul>
                    <li>
                        <i class="mod-service-icon mod_service_zheng"></i>
                        <div class="mod_service_tit">
                            <h5>正品保障</h5>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li>
                        <i class="mod-service-icon mod_service_kuai"></i>
                        <div class="mod_service_tit">
                            <h5>正品保障</h5>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li>
                        <i class="mod-service-icon mod_service_bao"></i>
                        <div class="mod_service_tit">
                            <h5>正品保障</h5>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li>
                        <i class="mod-service-icon mod_service_bao"></i>
                        <div class="mod_service_tit">
                            <h5>正品保障</h5>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                    <li>
                        <i class="mod-service-icon mod_service_bao"></i>
                        <div class="mod_service_tit">
                            <h5>正品保障</h5>
                            <p>正品保障，提供发票</p>
                        </div>
                    </li>
                </ul>
            </div>
            <!-- mod_help -->
            <div class="mod_help">
                <dl class="mod_help_item">
                    <dt>购物指南</dt>
                    <dd> <a href="#">购物流程 </a></dd>
                    <dd> <a href="#">会员介绍 </a></dd>
                    <dd> <a href="#">生活旅行/团购 </a></dd>
                    <dd> <a href="#">常见问题 </a></dd>
                    <dd> <a href="#">大家电 </a></dd>
                    <dd> <a href="#">联系客服 </a></dd>
                </dl>
                <dl class="mod_help_item">
                    <dt>购物指南</dt>
                    <dd> <a href="#">购物流程 </a></dd>
                    <dd> <a href="#">会员介绍 </a></dd>
                    <dd> <a href="#">生活旅行/团购 </a></dd>
                    <dd> <a href="#">常见问题 </a></dd>
                    <dd> <a href="#">大家电 </a></dd>
                    <dd> <a href="#">联系客服 </a></dd>
                </dl>
                <dl class="mod_help_item">
                    <dt>购物指南</dt>
                    <dd> <a href="#">购物流程 </a></dd>
                    <dd> <a href="#">会员介绍 </a></dd>
                    <dd> <a href="#">生活旅行/团购 </a></dd>
                    <dd> <a href="#">常见问题 </a></dd>
                    <dd> <a href="#">大家电 </a></dd>
                    <dd> <a href="#">联系客服 </a></dd>
                </dl>
                <dl class="mod_help_item">
                    <dt>购物指南</dt>
                    <dd> <a href="#">购物流程 </a></dd>
                    <dd> <a href="#">会员介绍 </a></dd>
                    <dd> <a href="#">生活旅行/团购 </a></dd>
                    <dd> <a href="#">常见问题 </a></dd>
                    <dd> <a href="#">大家电 </a></dd>
                    <dd> <a href="#">联系客服 </a></dd>
                </dl>
                <dl class="mod_help_item">
                    <dt>购物指南</dt>
                    <dd> <a href="#">购物流程 </a></dd>
                    <dd> <a href="#">会员介绍 </a></dd>
                    <dd> <a href="#">生活旅行/团购 </a></dd>
                    <dd> <a href="#">常见问题 </a></dd>
                    <dd> <a href="#">大家电 </a></dd>
                    <dd> <a href="#">联系客服 </a></dd>
                </dl>
                <dl class="mod_help_item mod_help_app">
                    <dt>帮助中心</dt>
                    <dd>
                        <img src="upload/erweima.png" alt="">
                        <p>品优购客户端</p>
                    </dd>
                </dl>
            </div>

            <!-- mod_copyright  -->
            <div class="mod_copyright">
                <p class="mod_copyright_links">
                    关于我们 | 联系我们 | 联系客服 | 商家入驻 | 营销中心 | 手机品优购 | 友情链接 | 销售联盟 | 品优购社区 | 品优购公益 | English Site | Contact U
                </p>
                <p class="mod_copyright_info">
                    地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100 邮箱: zhanghj+itcast.cn <br> 京ICP备08001421号京公网安备110108007702
                </p>
            </div>
        </div>
    </div>
    <!-- footer end -->
    
    <script type="text/javascript">
        
        $(function () {
// ##########################################################点击全选
            // 点击全选，能够让所有小的checkbox选中
            // 大按钮一改变了，小按钮立刻跟着改变
            $('.checkall').change(function () {

                // 获取大checkbox的checked的值【找的是当前点击的大按钮】
                var flag = $(this).prop('checked');

                // 获取小按钮并且把大的checked的值[flag]保存给小的按钮
                $('.j-checkbox').prop('checked',flag);

                // 除了要设置小的按钮，还要设置大的，因为大的又两个我们不能知道另外一个是哪个，所有我们直接都直接既可【flag】
                $('.checkall').prop('checked',flag);

                // 添加背景
                if (flag) {
                    $('.cart-item').addClass('check-cart-item');
                } else {
                    $('.cart-item').removeClass('check-cart-item');
                }

            });
// ########################################################################点击小按钮全选

            // 点击小checkbox，如果小的checkbox都选中，让全选也要选中
            $('.j-checkbox').change(function () {

                // 找到总共有几个小的checkbox的个数
                // console.log( $('.j-checkbox') )
                var len1 = $('.j-checkbox').length;
                // 再找到被选中的小的checkbox的个数
                var len2 = $('.j-checkbox:checked').length;

                // ，如果两个个数相同，说明都选了，如果不同，不是全选
                if (len1 === len2) {
                    $('.checkall').prop('checked',true);
                } else {
                    $('.checkall').prop('checked',false);
                }

                // 背景颜色
                var flag = $(this).prop('checked');
                if (flag) {
                    $(this).parents('.cart-item').addClass('check-cart-item');
                } else {
                     $(this).parents('.cart-item').removeClass('check-cart-item');
                }


            });
// ###################################################################点击增加
// // ############################################################小计总额
            // 点击加按钮，让前面的数字增加1
            $('.increment').click(function () {

                // 获取前面的值
                // 找的是当前点击的加按钮的前面的兄弟的val值
                var n = $(this).siblings('.itxt').val();
                // 增加1
                n++;
                // 再放到元素中
                $(this).siblings('.itxt').val(n);


                // 还要计算小计总额
                // 获取单价
                var divVal = $(this).parent().parent().siblings('.p-price').text();
                // 转换
                divVal = divVal.substr(1);
                // 计算小计
                var result = n * divVal;

                // 对象.toFixed(2)；保留几位有效数字
                 result = result.toFixed(2);
                // alert(result);
                //把结果放到小计中
                $(this).parent().parent().siblings('.p-sum').text('￥' + result);
                getSum();

            });


// ###################################################################点击减少
// // ############################################################小计总额
            $('.decrement').click(function () {
                 // 获取前面的值
                // 找的是当前点击的加按钮的前面的兄弟的val值
                var n = $(this).siblings('.itxt').val();
                // 如果少于1，不准在减
                if (n < 1) {
                    return false;
                }
                // 减少1
                n--;
                // 再放到元素中
                $(this).siblings('.itxt').val(n);


                 // 还要计算小计总额
                // 获取单价
                var divVal = $(this).parent().parent().siblings('.p-price').text();
                // 转换
                divVal = divVal.substr(1);
                // 计算小计
                var result = n * divVal;

                // 对象.toFixed(2)；保留几位有效数字
                 result = result.toFixed(2);
                // alert(result);
                //把结果放到小计中
                $(this).parent().parent().siblings('.p-sum').text('￥' + result);
                getSum();

            });

// ############################################################直接修改内容
            $('.itxt').change(function () {
                var n = $(this).val();

                // 还要计算小计总额
                // 获取单价
                var divVal = $(this).parent().parent().siblings('.p-price').text();
                // 转换
                divVal = divVal.substr(1);
                // 计算小计
                var result = n * divVal;

                // 对象.toFixed(2)；保留几位有效数字
                 result = result.toFixed(2);
                // alert(result);
                //把结果放到小计中
                $(this).parent().parent().siblings('.p-sum').text('￥' + result);
                getSum();

            });
// #########################################################################求总数和总价
            getSum();
            // 总数 = 每一个input的数量相加
            // 总价 = 每一个小计相加的和
            function getSum () {
                var count = 0; // 总个数
                var sum = 0; // 总价

                // 求个数
                $('.itxt').each(function (index,elm) {

                    // 获取值
                    var zhi = $(elm).val();

                    // 求和
                    count = count + parseInt(zhi);

                });

                $('.amount-sum em').text(count);

                // 求价
                $('.p-sum').each(function (index,elm) {

                    // 获取p-sum里面的值
                    var zhi = $(elm).text();
                    // 截取字符串
                    zhi = zhi.substr(1);
                    // 转成数字
                    zhi = parseFloat(zhi);
                    // 求和
                    sum = sum + zhi;

                });
                sum = sum.toFixed(2);
                $('.price-sum em').text('￥' + sum);

            }

// ############################################################删除模块
            $('.p-action a').click(function () {

                $(this).parents('.cart-item').remove();
                getSum();

            });

            $('.remove-batch').click(function () {

                $('.j-checkbox').each(function (index,elm) {

                    // 查看当前li是否被选中，如果选中找到对应的cart-item删除即可
                    var flag = $(elm).prop('checked');
                    if (flag) {
                        $(this).parents('.cart-item').remove();
                    }
                    getSum();

                });

            });

            $('.clear-all').click(function () {
                $('.cart-item').remove();
                getSum();
            })


        });



    </script>
</body>

</html>